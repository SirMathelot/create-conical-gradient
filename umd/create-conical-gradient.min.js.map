{"version":3,"sources":["webpack://createConicalGradient/webpack/universalModuleDefinition","webpack://createConicalGradient/webpack/bootstrap","webpack://createConicalGradient/./src/index.ts","webpack://createConicalGradient/./src/ColorInterpolate.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createConicalGradient","userContext","colorStops","x","y","startAngle","endAngle","anticlockwise","Math","PI","degStart","floor","degEnd","ceil","canvas","document","createElement","width","height","ctx","getContext","corners","radius","max","map","cx","cy","sqrt","pow","translate","lineWidth","interpolate","save","rotate","beginPath","moveTo","lineTo","fillStyle","getColor","fill","closePath","restore","cvsForClip","clipCtx","arc","createPattern","CanvasRenderingContext2D","ctx2d","obj","stops","addColorStop","offset","color","push","args","ConicalGradient","segment","gradient","createLinearGradient","stop","fillRect","rgbaSet","getImageData","data","rgba","slice"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,wBAAyB,GAAIH,GACV,iBAAZC,QACdA,QAA+B,sBAAID,IAEnCD,EAA4B,sBAAIC,IARlC,CASGK,MAAM,WACT,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,yNClFrD,WAGA,SAAwBC,EACtBC,EACAC,EAIAC,EACAC,EACAC,EACAC,EACAC,QARA,IAAAL,MAAa,CACX,CAAC,EAAG,QACJ,CAAC,EAAG,eAEN,IAAAC,MAAA,QACA,IAAAC,MAAA,QACA,IAAAC,MAAA,QACA,IAAAC,MAAW,EAAIE,KAAKC,SACpB,IAAAF,OAAA,GAEA,IAAMG,EAAWF,KAAKG,MAAoB,IAAbN,EAAoBG,KAAKC,IAChDG,EAASJ,KAAKK,KAAiB,IAAXP,EAAkBE,KAAKC,IAG3CK,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQhB,EAAYa,OAAOG,MAClCH,EAAOI,OAASjB,EAAYa,OAAOI,OACnC,IAAMC,EAAML,EAAOM,WAAW,MAGxBC,EAAU,CACd,CAAC,EAAG,GACJ,CAACpB,EAAYa,OAAOG,MAAO,GAC3B,CAAChB,EAAYa,OAAOG,MAAOhB,EAAYa,OAAOI,QAC9C,CAAC,EAAGjB,EAAYa,OAAOI,SAInBI,EACJd,KAAKe,IAAG,MAARf,KAAYa,EAAQG,KAAI,SAAC,G,IAACC,EAAE,KAAEC,EAAE,KAAM,OAAAlB,KAAKmB,KAAKnB,KAAKoB,IAAIH,EAAKtB,EAAG,GAAKK,KAAKoB,IAAIF,EAAKtB,EAAG,QACvF,GAEFe,EAAIU,UAAU1B,EAAGC,GAOjB,IANA,IAAM0B,EAAa,EAAItB,KAAKC,IAAMa,EAAS,IAAO,IAG5CS,EAAc,IAAI,UAAiB7B,EAAYU,EAASF,EAAW,GAGhE1C,EAAI0C,EAAU1C,GAAK4C,EAAQ5C,IAClCmD,EAAIa,OACJb,EAAIc,QAAS1B,GAAiB,EAAI,IAAMC,KAAKC,GAAKzC,GAAM,KAExDmD,EAAIe,YAEJf,EAAIgB,OAAO,EAAG,GACdhB,EAAIiB,OAAOd,GAAS,EAAIQ,GACxBX,EAAIiB,OAAOd,EAAQ,GAEnBH,EAAIkB,UAAYN,EAAYO,SAAStE,EAAI0C,GACzCS,EAAIoB,OAEJpB,EAAIqB,YAEJrB,EAAIsB,UAIN,IAAMC,EAAa3B,SAASC,cAAc,UAC1C0B,EAAWzB,MAAQhB,EAAYa,OAAOG,MACtCyB,EAAWxB,OAASjB,EAAYa,OAAOI,OACvC,IAAMyB,EAAUD,EAAWtB,WAAW,MAQtC,OAPAuB,EAAQT,YACRS,EAAQC,IAAIzC,EAAGC,EAAGkB,EAAQjB,EAAYC,EAAUC,GAChDoC,EAAQP,OAAOjC,EAAGC,GAClBuC,EAAQH,YACRG,EAAQN,UAAYM,EAAQE,cAAc/B,EAAQ,aAClD6B,EAAQJ,OAEDtC,EAAY4C,cAAcH,EAAY,aAvE/C,YA0EAI,yBAAyBlD,UAAUI,sBAAwB,W,IAAU,sDACnE,IAAM+C,EAAQnF,KAERoF,EAAuB,CAC3BC,MAAO,GACPC,aAAY,SAACC,EAAQC,GACnBxF,KAAKqF,MAAMI,KAAK,CAACF,EAAQC,KAE3B,cACE,OAAOpD,EAAqB,gBAAC+C,EAAOnF,KAAKqF,OAAUK,MAIvD,OAAON,GAGT,WAAS,iFAAAO,oB,8EC7FT,iBAIE,WAAYN,EAAgCO,QAAhC,IAAAP,MAAA,SAAgC,IAAAO,MAAA,KAC1C,IAAM1C,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQuC,EACf1C,EAAOI,OAAS,EAChBtD,KAAKuD,IAAML,EAAOM,WAAW,MAG7B,IADA,IAAMqC,EAAW7F,KAAKuD,IAAIuC,qBAAqB,EAAG,EAAGF,EAAS,GAC3C,MAAAP,EAAA,eAAO,CAArB,IAAMU,EAAI,KACbF,EAASP,aAAY,MAArBO,EAAyBE,GAG3B/F,KAAKuD,IAAIkB,UAAYoB,EACrB7F,KAAKuD,IAAIyC,SAAS,EAAG,EAAGJ,EAAS,GAEjC5F,KAAKiG,QAAUjG,KAAKuD,IAAI2C,aAAa,EAAG,EAAGN,EAAS,GAAGO,KAO3D,OAJE,YAAAzB,SAAA,SAASa,GACP,IAAMa,EAAOpG,KAAKiG,QAAQI,MAAM,EAAId,EAAQ,EAAIA,EAAS,GACzD,MAAO,QAAQa,EAAK,GAAE,KAAKA,EAAK,GAAE,KAAKA,EAAK,GAAE,KAAKA,EAAK,GAAK,IAAG,KAEpE,EAzBA,G","file":"umd/create-conical-gradient.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"createConicalGradient\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"createConicalGradient\"] = factory();\n\telse\n\t\troot[\"createConicalGradient\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import ColorInterpolate from './ColorInterpolate';\nimport { ConicalGradient } from './types';\n\nexport default function createConicalGradient(\n  userContext: CanvasRenderingContext2D,\n  colorStops = [\n    [0, '#fff'],\n    [1, '#fff'],\n  ] as [number, string][],\n  x = 0,\n  y = 0,\n  startAngle = 0,\n  endAngle = 2 * Math.PI,\n  anticlockwise = false,\n) {\n  const degStart = Math.floor((startAngle * 180) / Math.PI);\n  const degEnd = Math.ceil((endAngle * 180) / Math.PI);\n\n  // init off-screen canvas\n  const canvas = document.createElement('canvas');\n  canvas.width = userContext.canvas.width;\n  canvas.height = userContext.canvas.height;\n  const ctx = canvas.getContext('2d')!;\n\n  // user canvas corners\n  const corners = [\n    [0, 0],\n    [userContext.canvas.width, 0],\n    [userContext.canvas.width, userContext.canvas.height],\n    [0, userContext.canvas.height],\n  ];\n\n  // gradient radius\n  const radius =\n    Math.max(...corners.map(([cx, cy]) => Math.sqrt(Math.pow(cx - x, 2) + Math.pow(cy - y, 2)))) +\n    10;\n\n  ctx.translate(x, y);\n  const lineWidth = (2 * Math.PI * (radius + 20)) / 360;\n\n  // color linear interpolate\n  const interpolate = new ColorInterpolate(colorStops, degEnd - degStart + 1);\n\n  // draw gradient image\n  for (let i = degStart; i <= degEnd; i++) {\n    ctx.save();\n    ctx.rotate(((anticlockwise ? -1 : 1) * (Math.PI * i)) / 180);\n\n    ctx.beginPath();\n\n    ctx.moveTo(0, 0);\n    ctx.lineTo(radius, -2 * lineWidth);\n    ctx.lineTo(radius, 0);\n\n    ctx.fillStyle = interpolate.getColor(i - degStart);\n    ctx.fill();\n\n    ctx.closePath();\n\n    ctx.restore();\n  }\n\n  // clip content overflow\n  const cvsForClip = document.createElement('canvas');\n  cvsForClip.width = userContext.canvas.width;\n  cvsForClip.height = userContext.canvas.height;\n  const clipCtx = cvsForClip.getContext('2d')!;\n  clipCtx.beginPath();\n  clipCtx.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n  clipCtx.lineTo(x, y);\n  clipCtx.closePath();\n  clipCtx.fillStyle = clipCtx.createPattern(canvas, 'no-repeat')!;\n  clipCtx.fill();\n\n  return userContext.createPattern(cvsForClip, 'no-repeat')!;\n}\n\nCanvasRenderingContext2D.prototype.createConicalGradient = function (...args) {\n  const ctx2d = this;\n\n  const obj: ConicalGradient = {\n    stops: [],\n    addColorStop(offset, color) {\n      this.stops.push([offset, color]);\n    },\n    get pattern() {\n      return createConicalGradient(ctx2d, this.stops, ...args);\n    },\n  };\n\n  return obj;\n};\n\nexport { ConicalGradient } from './types';\n","export default class ColorInterpolate {\n  private readonly ctx: CanvasRenderingContext2D;\n  private readonly rgbaSet: Uint8ClampedArray;\n\n  constructor(stops: [number, string][] = [], segment = 100) {\n    const canvas = document.createElement('canvas');\n    canvas.width = segment;\n    canvas.height = 1;\n    this.ctx = canvas.getContext('2d')!;\n\n    const gradient = this.ctx.createLinearGradient(0, 0, segment, 0);\n    for (const stop of stops) {\n      gradient.addColorStop(...stop);\n    }\n\n    this.ctx.fillStyle = gradient;\n    this.ctx.fillRect(0, 0, segment, 1);\n\n    this.rgbaSet = this.ctx.getImageData(0, 0, segment, 1).data;\n  }\n\n  getColor(offset: number) {\n    const rgba = this.rgbaSet.slice(4 * offset, 4 * offset + 4);\n    return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3] / 255})`;\n  }\n}\n"],"sourceRoot":""}